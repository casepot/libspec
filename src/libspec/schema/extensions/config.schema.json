{
  "$defs": {
    "ConfigLibraryFields": {
      "properties": {
        "config_sources": {
          "anyOf": [
            {
              "$ref": "#/$defs/ConfigSourcesSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "profiles": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/ProfileSpec"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Configuration profiles",
          "title": "Profiles"
        },
        "secrets": {
          "anyOf": [
            {
              "$ref": "#/$defs/SecretsSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "settings": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/SettingSpec"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Configuration settings",
          "title": "Settings"
        }
      },
      "title": "ConfigLibraryFields",
      "type": "object"
    },
    "ConfigSourcesSpec": {
      "properties": {
        "env_prefix": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Environment variable prefix (e.g., 'MYLIB_')",
          "title": "Env Prefix"
        },
        "file_formats": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/FileFormat"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Supported config file formats",
          "title": "File Formats"
        },
        "file_name_pattern": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Config file name pattern (e.g., '{name}.toml')",
          "title": "File Name Pattern"
        },
        "nested_delimiter": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": "__",
          "description": "Delimiter for nested settings in env vars",
          "title": "Nested Delimiter"
        },
        "paths": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Config file search paths",
          "title": "Paths"
        },
        "priority": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/PriorityEnum"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Source priority (first = highest)",
          "title": "Priority"
        }
      },
      "title": "ConfigSourcesSpec",
      "type": "object"
    },
    "FileFormat": {
      "description": "Configuration file format.\n\n- toml: TOML format (pyproject.toml style)\n- yaml: YAML format\n- json: JSON format\n- ini: INI/ConfigParser format\n- env: .env file format",
      "enum": [
        "toml",
        "yaml",
        "json",
        "ini",
        "env"
      ],
      "title": "FileFormat",
      "type": "string"
    },
    "PriorityEnum": {
      "description": "Configuration source priority order.\n\n- cli: Command-line arguments (highest priority)\n- env: Environment variables\n- file: Configuration files\n- defaults: Default values\n- remote: Remote configuration server\n- secrets_manager: Secrets management service",
      "enum": [
        "cli",
        "env",
        "file",
        "defaults",
        "remote",
        "secrets_manager"
      ],
      "title": "PriorityEnum",
      "type": "string"
    },
    "ProfileSpec": {
      "properties": {
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What this profile is for",
          "title": "Description"
        },
        "env_var_trigger": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Env var that activates this profile",
          "title": "Env Var Trigger"
        },
        "inherits": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Base profile to inherit from",
          "title": "Inherits"
        },
        "name": {
          "description": "Profile name (e.g., 'development', 'production')",
          "minLength": 1,
          "title": "Name",
          "type": "string"
        },
        "overrides": {
          "anyOf": [
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Setting overrides for this profile",
          "title": "Overrides"
        }
      },
      "required": [
        "name"
      ],
      "title": "ProfileSpec",
      "type": "object"
    },
    "SecretsSpec": {
      "properties": {
        "fields": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Setting names that are secrets",
          "title": "Fields"
        },
        "masking": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": true,
          "description": "Whether secrets are masked in logs",
          "title": "Masking"
        },
        "rotation_supported": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether secret rotation is supported",
          "title": "Rotation Supported"
        },
        "storage": {
          "anyOf": [
            {
              "$ref": "#/$defs/SecretsStorage"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Where secrets are stored"
        }
      },
      "title": "SecretsSpec",
      "type": "object"
    },
    "SecretsStorage": {
      "description": "Where secrets are stored and retrieved from.\n\n- env: Environment variables\n- keyring: System keyring (keyring library)\n- vault: HashiCorp Vault\n- aws_secrets: AWS Secrets Manager\n- gcp_secrets: Google Cloud Secret Manager\n- azure_keyvault: Azure Key Vault\n- file: Local encrypted file",
      "enum": [
        "env",
        "keyring",
        "vault",
        "aws_secrets",
        "gcp_secrets",
        "azure_keyvault",
        "file"
      ],
      "title": "SecretsStorage",
      "type": "string"
    },
    "SettingSpec": {
      "properties": {
        "choices": {
          "anyOf": [
            {
              "items": {},
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Valid choices for enum-like settings",
          "title": "Choices"
        },
        "cli_flag": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "CLI flag (e.g., '--timeout')",
          "title": "Cli Flag"
        },
        "cli_short": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Short CLI flag (e.g., '-t')",
          "title": "Cli Short"
        },
        "default": {
          "anyOf": [
            {},
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Default value",
          "title": "Default"
        },
        "deprecated": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Whether this setting is deprecated",
          "title": "Deprecated"
        },
        "deprecated_message": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Deprecation message with migration guidance",
          "title": "Deprecated Message"
        },
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What this setting controls",
          "title": "Description"
        },
        "env_var": {
          "anyOf": [
            {
              "minLength": 1,
              "pattern": "^[A-Z_][A-Z0-9_]*$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Environment variable name",
          "title": "Env Var"
        },
        "name": {
          "description": "Setting name",
          "minLength": 1,
          "title": "Name",
          "type": "string"
        },
        "required": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Whether this setting must be provided",
          "title": "Required"
        },
        "secret": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Whether this is a secret value",
          "title": "Secret"
        },
        "type": {
          "description": "Setting type (str, int, float, bool, list, dict)",
          "title": "Type",
          "type": "string"
        },
        "validation": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Validation rule (e.g., 'gt(0)', 'regex(...)')",
          "title": "Validation"
        }
      },
      "required": [
        "name",
        "type"
      ],
      "title": "SettingSpec",
      "type": "object"
    }
  },
  "$id": "https://libspec.dev/schema/1.0/extensions/config.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Extension for configuration management specifications.",
  "title": "Config Extension"
}
