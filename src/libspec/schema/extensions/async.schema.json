{
  "$defs": {
    "AsyncFunctionFields": {
      "properties": {
        "async": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Whether this is an async function",
          "title": "Async"
        },
        "awaitable": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether the return value is awaitable",
          "title": "Awaitable"
        },
        "blocking": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether this function blocks the event loop",
          "title": "Blocking"
        },
        "cancellation": {
          "anyOf": [
            {
              "$ref": "#/$defs/CancellationSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "title": "AsyncFunctionFields",
      "type": "object"
    },
    "AsyncMethodFields": {
      "properties": {
        "async": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Whether this is an async method",
          "title": "Async"
        },
        "awaitable": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether the return value is awaitable",
          "title": "Awaitable"
        },
        "blocking": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether this method blocks the event loop",
          "title": "Blocking"
        },
        "cancellation": {
          "anyOf": [
            {
              "$ref": "#/$defs/CancellationSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "title": "AsyncMethodFields",
      "type": "object"
    },
    "AsyncStateSpec": {
      "properties": {
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What this state represents",
          "title": "Description"
        },
        "name": {
          "description": "State name",
          "minLength": 1,
          "title": "Name",
          "type": "string"
        },
        "on_enter": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Action to run on entering this state",
          "title": "On Enter"
        },
        "on_exit": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Action to run on exiting this state",
          "title": "On Exit"
        },
        "terminal": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Whether this is a terminal state",
          "title": "Terminal"
        }
      },
      "required": [
        "name"
      ],
      "title": "AsyncStateSpec",
      "type": "object"
    },
    "AsyncTransitionSpec": {
      "properties": {
        "from": {
          "description": "Source state name",
          "minLength": 1,
          "title": "From",
          "type": "string"
        },
        "guard": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Condition that must be true for transition",
          "title": "Guard"
        },
        "side_effects": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Side effects of this transition",
          "title": "Side Effects"
        },
        "to": {
          "description": "Target state name",
          "minLength": 1,
          "title": "To",
          "type": "string"
        },
        "trigger": {
          "description": "What causes this transition (method call, event, etc.)",
          "title": "Trigger",
          "type": "string"
        }
      },
      "required": [
        "from",
        "to",
        "trigger"
      ],
      "title": "AsyncTransitionSpec",
      "type": "object"
    },
    "AsyncTypeFields": {
      "properties": {
        "lifecycle": {
          "anyOf": [
            {
              "$ref": "#/$defs/LifecycleSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "observable": {
          "anyOf": [
            {
              "$ref": "#/$defs/ObservableSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "scheduling": {
          "anyOf": [
            {
              "$ref": "#/$defs/SchedulingSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "synchronization": {
          "anyOf": [
            {
              "$ref": "#/$defs/SyncSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "title": "AsyncTypeFields",
      "type": "object"
    },
    "CancellationMode": {
      "description": "How async operations handle cancellation requests.\n\n- cooperative: Operation checks for cancellation explicitly\n- immediate: Cancellation interrupts operation immediately\n- none: No cancellation support",
      "enum": [
        "cooperative",
        "immediate",
        "none"
      ],
      "title": "CancellationMode",
      "type": "string"
    },
    "CancellationSpec": {
      "properties": {
        "cleanup": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What cleanup happens on cancellation",
          "title": "Cleanup"
        },
        "mode": {
          "anyOf": [
            {
              "$ref": "#/$defs/CancellationMode"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Cancellation mode"
        },
        "propagates": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": true,
          "description": "Whether cancellation propagates to children",
          "title": "Propagates"
        }
      },
      "title": "CancellationSpec",
      "type": "object"
    },
    "Executor": {
      "description": "Where async operations are executed.\n\n- event_loop: Single-threaded asyncio event loop\n- thread_pool: ThreadPoolExecutor for I/O-bound work\n- process_pool: ProcessPoolExecutor for CPU-bound work\n- custom: Custom executor implementation",
      "enum": [
        "event_loop",
        "thread_pool",
        "process_pool",
        "custom"
      ],
      "title": "Executor",
      "type": "string"
    },
    "Kind": {
      "description": "Observable stream temperature (hot vs cold).\n\n- hot: Emits regardless of subscribers; late subscribers miss events\n- cold: Waits for subscription; each subscriber gets all events",
      "enum": [
        "hot",
        "cold"
      ],
      "title": "Kind",
      "type": "string"
    },
    "LifecycleSpec": {
      "properties": {
        "initial_state": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Initial state name",
          "title": "Initial State"
        },
        "states": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/AsyncStateSpec"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "All possible states",
          "title": "States"
        },
        "transitions": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/AsyncTransitionSpec"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Valid state transitions",
          "title": "Transitions"
        }
      },
      "title": "LifecycleSpec",
      "type": "object"
    },
    "ObservableBackpressure": {
      "description": "How observables handle slow consumers.\n\n- buffer: Buffer items until consumer catches up\n- drop: Drop new items when buffer is full\n- block: Block producer until consumer catches up\n- error: Signal error when buffer overflows\n- latest: Keep only the latest item, dropping older ones",
      "enum": [
        "buffer",
        "drop",
        "block",
        "error",
        "latest"
      ],
      "title": "ObservableBackpressure",
      "type": "string"
    },
    "ObservableSpec": {
      "properties": {
        "backpressure": {
          "anyOf": [
            {
              "$ref": "#/$defs/ObservableBackpressure"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Backpressure strategy"
        },
        "kind": {
          "anyOf": [
            {
              "$ref": "#/$defs/Kind"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Hot (live) or cold (replay) observable"
        },
        "multicasting": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether multiple subscribers share the same stream",
          "title": "Multicasting"
        },
        "replay": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether late subscribers receive past events",
          "title": "Replay"
        },
        "replay_buffer": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Number of past events to replay",
          "title": "Replay Buffer"
        }
      },
      "title": "ObservableSpec",
      "type": "object"
    },
    "Primitive": {
      "description": "Type of synchronization primitive for concurrent access.\n\n- mailbox: Actor-style message passing\n- channel: Go-style typed communication channel\n- lock: Mutual exclusion lock\n- semaphore: Counting semaphore for resource limits\n- event: One-shot or multi-shot signaling\n- barrier: Synchronization point for multiple tasks\n- condition: Wait/notify coordination",
      "enum": [
        "mailbox",
        "channel",
        "lock",
        "semaphore",
        "event",
        "barrier",
        "condition"
      ],
      "title": "Primitive",
      "type": "string"
    },
    "Priority": {
      "description": "Task scheduling priority levels.\n\n- low: Background tasks, can be delayed\n- normal: Standard priority for most operations\n- high: Time-sensitive operations\n- realtime: Critical operations requiring immediate execution",
      "enum": [
        "low",
        "normal",
        "high",
        "realtime"
      ],
      "title": "Priority",
      "type": "string"
    },
    "SchedulingSpec": {
      "properties": {
        "executor": {
          "anyOf": [
            {
              "$ref": "#/$defs/Executor"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Where this runs"
        },
        "preemptible": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether execution can be preempted",
          "title": "Preemptible"
        },
        "priority": {
          "anyOf": [
            {
              "$ref": "#/$defs/Priority"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Scheduling priority"
        },
        "timeout": {
          "anyOf": [
            {
              "minimum": 0.0,
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Default timeout in seconds",
          "title": "Timeout"
        }
      },
      "title": "SchedulingSpec",
      "type": "object"
    },
    "Semantics": {
      "description": "Ordering and delivery semantics for message passing.\n\n- fifo: First-in, first-out ordering\n- priority: Priority-based ordering\n- broadcast: Message delivered to all subscribers\n- lifo: Last-in, first-out (stack) ordering",
      "enum": [
        "fifo",
        "priority",
        "broadcast",
        "lifo"
      ],
      "title": "Semantics",
      "type": "string"
    },
    "SyncBackpressure": {
      "description": "How synchronization primitives handle capacity limits.\n\n- block: Block sender until space available\n- drop: Silently discard new items\n- error: Raise an error when full",
      "enum": [
        "block",
        "drop",
        "error"
      ],
      "title": "SyncBackpressure",
      "type": "string"
    },
    "SyncSpec": {
      "properties": {
        "backpressure": {
          "anyOf": [
            {
              "$ref": "#/$defs/SyncBackpressure"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What happens when capacity is reached"
        },
        "bounded": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether the primitive has a capacity limit",
          "title": "Bounded"
        },
        "capacity": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Maximum capacity (if bounded)",
          "title": "Capacity"
        },
        "primitive": {
          "anyOf": [
            {
              "$ref": "#/$defs/Primitive"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Type of synchronization primitive"
        },
        "semantics": {
          "anyOf": [
            {
              "$ref": "#/$defs/Semantics"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Ordering/delivery semantics"
        }
      },
      "title": "SyncSpec",
      "type": "object"
    }
  },
  "$id": "https://libspec.dev/schema/1.0/extensions/async.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Extension for async/concurrent system semantics: lifecycle, cancellation, synchronization, observables.",
  "title": "Async Extension"
}
