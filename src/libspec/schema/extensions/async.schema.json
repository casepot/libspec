{
  "$defs": {
    "AsyncFunctionFields": {
      "properties": {
        "async": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Whether this is an async function",
          "title": "Async"
        },
        "awaitable": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether the return value is awaitable",
          "title": "Awaitable"
        },
        "blocking": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether this function blocks the event loop",
          "title": "Blocking"
        },
        "cancellation": {
          "anyOf": [
            {
              "$ref": "#/$defs/CancellationSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "title": "AsyncFunctionFields",
      "type": "object"
    },
    "AsyncMethodFields": {
      "properties": {
        "async": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Whether this is an async method",
          "title": "Async"
        },
        "awaitable": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether the return value is awaitable",
          "title": "Awaitable"
        },
        "blocking": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether this method blocks the event loop",
          "title": "Blocking"
        },
        "cancellation": {
          "anyOf": [
            {
              "$ref": "#/$defs/CancellationSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "title": "AsyncMethodFields",
      "type": "object"
    },
    "AsyncStateSpec": {
      "properties": {
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What this state represents",
          "title": "Description"
        },
        "name": {
          "description": "State name",
          "title": "Name",
          "type": "string"
        },
        "on_enter": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Action to run on entering this state",
          "title": "On Enter"
        },
        "on_exit": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Action to run on exiting this state",
          "title": "On Exit"
        },
        "terminal": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Whether this is a terminal state",
          "title": "Terminal"
        }
      },
      "required": [
        "name"
      ],
      "title": "AsyncStateSpec",
      "type": "object"
    },
    "AsyncTransitionSpec": {
      "properties": {
        "from": {
          "description": "Source state name",
          "title": "From",
          "type": "string"
        },
        "guard": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Condition that must be true for transition",
          "title": "Guard"
        },
        "side_effects": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Side effects of this transition",
          "title": "Side Effects"
        },
        "to": {
          "description": "Target state name",
          "title": "To",
          "type": "string"
        },
        "trigger": {
          "description": "What causes this transition (method call, event, etc.)",
          "title": "Trigger",
          "type": "string"
        }
      },
      "required": [
        "from",
        "to",
        "trigger"
      ],
      "title": "AsyncTransitionSpec",
      "type": "object"
    },
    "AsyncTypeFields": {
      "properties": {
        "lifecycle": {
          "anyOf": [
            {
              "$ref": "#/$defs/LifecycleSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "observable": {
          "anyOf": [
            {
              "$ref": "#/$defs/ObservableSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "scheduling": {
          "anyOf": [
            {
              "$ref": "#/$defs/SchedulingSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "synchronization": {
          "anyOf": [
            {
              "$ref": "#/$defs/SyncSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "title": "AsyncTypeFields",
      "type": "object"
    },
    "CancellationMode": {
      "enum": [
        "cooperative",
        "immediate",
        "none"
      ],
      "title": "CancellationMode",
      "type": "string"
    },
    "CancellationSpec": {
      "properties": {
        "cleanup": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What cleanup happens on cancellation",
          "title": "Cleanup"
        },
        "mode": {
          "anyOf": [
            {
              "$ref": "#/$defs/CancellationMode"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Cancellation mode"
        },
        "propagates": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": true,
          "description": "Whether cancellation propagates to children",
          "title": "Propagates"
        }
      },
      "title": "CancellationSpec",
      "type": "object"
    },
    "Executor": {
      "enum": [
        "event_loop",
        "thread_pool",
        "process_pool",
        "custom"
      ],
      "title": "Executor",
      "type": "string"
    },
    "Kind": {
      "enum": [
        "hot",
        "cold"
      ],
      "title": "Kind",
      "type": "string"
    },
    "LifecycleSpec": {
      "properties": {
        "initial_state": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Initial state name",
          "title": "Initial State"
        },
        "states": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/AsyncStateSpec"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "All possible states",
          "title": "States"
        },
        "transitions": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/AsyncTransitionSpec"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Valid state transitions",
          "title": "Transitions"
        }
      },
      "title": "LifecycleSpec",
      "type": "object"
    },
    "ObservableBackpressure": {
      "enum": [
        "buffer",
        "drop",
        "block",
        "error",
        "latest"
      ],
      "title": "ObservableBackpressure",
      "type": "string"
    },
    "ObservableSpec": {
      "properties": {
        "backpressure": {
          "anyOf": [
            {
              "$ref": "#/$defs/ObservableBackpressure"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Backpressure strategy"
        },
        "kind": {
          "anyOf": [
            {
              "$ref": "#/$defs/Kind"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Hot (live) or cold (replay) observable"
        },
        "multicasting": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether multiple subscribers share the same stream",
          "title": "Multicasting"
        },
        "replay": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether late subscribers receive past events",
          "title": "Replay"
        },
        "replay_buffer": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Number of past events to replay",
          "title": "Replay Buffer"
        }
      },
      "title": "ObservableSpec",
      "type": "object"
    },
    "Primitive": {
      "enum": [
        "mailbox",
        "channel",
        "lock",
        "semaphore",
        "event",
        "barrier",
        "condition"
      ],
      "title": "Primitive",
      "type": "string"
    },
    "Priority": {
      "enum": [
        "low",
        "normal",
        "high",
        "realtime"
      ],
      "title": "Priority",
      "type": "string"
    },
    "SchedulingSpec": {
      "properties": {
        "executor": {
          "anyOf": [
            {
              "$ref": "#/$defs/Executor"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Where this runs"
        },
        "preemptible": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether execution can be preempted",
          "title": "Preemptible"
        },
        "priority": {
          "anyOf": [
            {
              "$ref": "#/$defs/Priority"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Scheduling priority"
        },
        "timeout_default": {
          "anyOf": [
            {
              "minimum": 0.0,
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Default timeout in seconds",
          "title": "Timeout Default"
        }
      },
      "title": "SchedulingSpec",
      "type": "object"
    },
    "Semantics": {
      "enum": [
        "fifo",
        "priority",
        "broadcast",
        "lifo"
      ],
      "title": "Semantics",
      "type": "string"
    },
    "SyncBackpressure": {
      "enum": [
        "block",
        "drop",
        "error"
      ],
      "title": "SyncBackpressure",
      "type": "string"
    },
    "SyncSpec": {
      "properties": {
        "backpressure": {
          "anyOf": [
            {
              "$ref": "#/$defs/SyncBackpressure"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What happens when capacity is reached"
        },
        "bounded": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether the primitive has a capacity limit",
          "title": "Bounded"
        },
        "capacity": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Maximum capacity (if bounded)",
          "title": "Capacity"
        },
        "primitive": {
          "anyOf": [
            {
              "$ref": "#/$defs/Primitive"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Type of synchronization primitive"
        },
        "semantics": {
          "anyOf": [
            {
              "$ref": "#/$defs/Semantics"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Ordering/delivery semantics"
        }
      },
      "title": "SyncSpec",
      "type": "object"
    }
  },
  "$id": "https://libspec.dev/schema/1.0/extensions/async.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Extension for async/concurrent system semantics: lifecycle, cancellation, synchronization, observables.",
  "title": "Async Extension"
}
