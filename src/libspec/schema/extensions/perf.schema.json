{
  "$defs": {
    "BenchmarkSpec": {
      "properties": {
        "date": {
          "anyOf": [
            {
              "format": "date",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "When benchmark was run",
          "title": "Date"
        },
        "environment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Hardware/software environment",
          "title": "Environment"
        },
        "input_size": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Input size/parameters",
          "title": "Input Size"
        },
        "mean": {
          "anyOf": [
            {
              "exclusiveMinimum": 0.0,
              "type": "number"
            },
            {
              "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Mean execution time",
          "title": "Mean"
        },
        "median": {
          "anyOf": [
            {
              "exclusiveMinimum": 0.0,
              "type": "number"
            },
            {
              "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Median execution time",
          "title": "Median"
        },
        "memory_peak": {
          "anyOf": [
            {
              "exclusiveMinimum": 0.0,
              "type": "number"
            },
            {
              "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Peak memory usage",
          "title": "Memory Peak"
        },
        "operation": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What was benchmarked",
          "title": "Operation"
        },
        "p95": {
          "anyOf": [
            {
              "exclusiveMinimum": 0.0,
              "type": "number"
            },
            {
              "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "95th percentile latency",
          "title": "P95"
        },
        "p99": {
          "anyOf": [
            {
              "exclusiveMinimum": 0.0,
              "type": "number"
            },
            {
              "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "99th percentile latency",
          "title": "P99"
        },
        "throughput": {
          "anyOf": [
            {
              "exclusiveMinimum": 0.0,
              "type": "number"
            },
            {
              "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Operations per second",
          "title": "Throughput"
        }
      },
      "title": "BenchmarkSpec",
      "type": "object"
    },
    "ComplexitySpec": {
      "properties": {
        "amortized": {
          "anyOf": [
            {
              "minLength": 4,
              "pattern": "^O\\(.+\\)$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Amortized time complexity",
          "title": "Amortized"
        },
        "best_case": {
          "anyOf": [
            {
              "minLength": 4,
              "pattern": "^O\\(.+\\)$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Best-case time complexity",
          "title": "Best Case"
        },
        "notes": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Additional notes about complexity",
          "title": "Notes"
        },
        "space": {
          "anyOf": [
            {
              "minLength": 4,
              "pattern": "^O\\(.+\\)$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Space complexity (e.g., 'O(n)')",
          "title": "Space"
        },
        "time": {
          "anyOf": [
            {
              "minLength": 4,
              "pattern": "^O\\(.+\\)$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Time complexity, e.g. 'O(n log n)'",
          "title": "Time"
        },
        "worst_case": {
          "anyOf": [
            {
              "minLength": 4,
              "pattern": "^O\\(.+\\)$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Worst-case time complexity",
          "title": "Worst Case"
        }
      },
      "title": "ComplexitySpec",
      "type": "object"
    },
    "MemoryLayoutSpec": {
      "properties": {
        "alignment": {
          "anyOf": [
            {
              "exclusiveMinimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Memory alignment requirement",
          "title": "Alignment"
        },
        "cache_friendly": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether layout is cache-optimized",
          "title": "Cache Friendly"
        },
        "size_bytes": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Instance size in bytes",
          "title": "Size Bytes"
        },
        "slots": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether __slots__ is used",
          "title": "Slots"
        }
      },
      "title": "MemoryLayoutSpec",
      "type": "object"
    },
    "PerfFunctionFields": {
      "properties": {
        "benchmarks": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/BenchmarkSpec"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Benchmarks"
        },
        "complexity": {
          "anyOf": [
            {
              "$ref": "#/$defs/ComplexitySpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "optimization_hints": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Tips for optimal usage",
          "title": "Optimization Hints"
        }
      },
      "title": "PerfFunctionFields",
      "type": "object"
    },
    "PerfMethodFields": {
      "properties": {
        "benchmarks": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/BenchmarkSpec"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Benchmarks"
        },
        "complexity": {
          "anyOf": [
            {
              "$ref": "#/$defs/ComplexitySpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "optimization_hints": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Tips for optimal usage",
          "title": "Optimization Hints"
        }
      },
      "title": "PerfMethodFields",
      "type": "object"
    },
    "PerfTypeFields": {
      "properties": {
        "memory_layout": {
          "anyOf": [
            {
              "$ref": "#/$defs/MemoryLayoutSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "scaling": {
          "anyOf": [
            {
              "$ref": "#/$defs/ScalingSpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "title": "PerfTypeFields",
      "type": "object"
    },
    "ScalingSpec": {
      "properties": {
        "bottleneck": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Primary scaling bottleneck",
          "title": "Bottleneck"
        },
        "horizontal": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Supports horizontal scaling",
          "title": "Horizontal"
        },
        "max_concurrent": {
          "anyOf": [
            {
              "exclusiveMinimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Maximum concurrent operations",
          "title": "Max Concurrent"
        },
        "sharding_supported": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether sharding is supported",
          "title": "Sharding Supported"
        },
        "vertical": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Supports vertical scaling",
          "title": "Vertical"
        }
      },
      "title": "ScalingSpec",
      "type": "object"
    }
  },
  "$id": "https://libspec.dev/schema/1.0/extensions/perf.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Extension for performance characteristics and constraints.",
  "title": "Performance Extension"
}
