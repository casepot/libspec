{
  "$defs": {
    "BreakingChangeSpec": {
      "properties": {
        "affected": {
          "anyOf": [
            {
              "items": {
                "minLength": 1,
                "pattern": "^(([a-z_][a-z0-9_.]*)?#/[a-z]+/[a-zA-Z_][a-zA-Z0-9_-]*(/[a-z_]+/[a-zA-Z_][a-zA-Z0-9_-]*)*(\\[[^\\]]+\\])?|[a-z_][a-z0-9_.]*:[A-Z][a-zA-Z0-9_]*(\\[[^\\]]+\\])?|[a-z_][a-z0-9_]*\\.[A-Z][a-zA-Z0-9_]*(\\[[^\\]]+\\])?|[A-Za-z_][A-Za-z0-9_]*(\\[[^\\]]+\\])?)$",
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Affected APIs (cross-references)",
          "title": "Affected"
        },
        "automated_fix": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Whether an automated fix is available",
          "title": "Automated Fix"
        },
        "change": {
          "description": "Description of what changed",
          "title": "Change",
          "type": "string"
        },
        "codemod": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Codemod command to apply fix",
          "title": "Codemod"
        },
        "migration": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Migration instructions",
          "title": "Migration"
        },
        "version": {
          "description": "Version containing the breaking change",
          "minLength": 1,
          "title": "Version",
          "type": "string"
        }
      },
      "required": [
        "version",
        "change"
      ],
      "title": "BreakingChangeSpec",
      "type": "object"
    },
    "CompatibilitySpec": {
      "properties": {
        "backward": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Backward compatibility scope (e.g., '2.x series')",
          "title": "Backward"
        },
        "forward": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether forward compatibility is maintained",
          "title": "Forward"
        },
        "policy": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Compatibility policy description",
          "title": "Policy"
        },
        "semantic_versioning": {
          "anyOf": [
            {
              "$ref": "#/$defs/SemVerPolicySpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "title": "CompatibilitySpec",
      "type": "object"
    },
    "DeprecationSpec": {
      "properties": {
        "migration": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Migration instructions",
          "title": "Migration"
        },
        "reason": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Why this was deprecated",
          "title": "Reason"
        },
        "removed_in": {
          "anyOf": [
            {
              "minLength": 1,
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Version when removed (or planned removal)",
          "title": "Removed In"
        },
        "replacement": {
          "anyOf": [
            {
              "minLength": 1,
              "pattern": "^(([a-z_][a-z0-9_.]*)?#/[a-z]+/[a-zA-Z_][a-zA-Z0-9_-]*(/[a-z_]+/[a-zA-Z_][a-zA-Z0-9_-]*)*(\\[[^\\]]+\\])?|[a-z_][a-z0-9_.]*:[A-Z][a-zA-Z0-9_]*(\\[[^\\]]+\\])?|[a-z_][a-z0-9_]*\\.[A-Z][a-zA-Z0-9_]*(\\[[^\\]]+\\])?|[A-Za-z_][A-Za-z0-9_]*(\\[[^\\]]+\\])?)$",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What to use instead (cross-reference)",
          "title": "Replacement"
        },
        "since": {
          "description": "Version when deprecated",
          "minLength": 1,
          "title": "Since",
          "type": "string"
        },
        "target": {
          "description": "What is deprecated (cross-reference)",
          "minLength": 1,
          "pattern": "^(([a-z_][a-z0-9_.]*)?#/[a-z]+/[a-zA-Z_][a-zA-Z0-9_-]*(/[a-z_]+/[a-zA-Z_][a-zA-Z0-9_-]*)*(\\[[^\\]]+\\])?|[a-z_][a-z0-9_.]*:[A-Z][a-zA-Z0-9_]*(\\[[^\\]]+\\])?|[a-z_][a-z0-9_]*\\.[A-Z][a-zA-Z0-9_]*(\\[[^\\]]+\\])?|[A-Za-z_][A-Za-z0-9_]*(\\[[^\\]]+\\])?)$",
          "title": "Target",
          "type": "string"
        }
      },
      "required": [
        "target",
        "since"
      ],
      "title": "DeprecationSpec",
      "type": "object"
    },
    "SemVerPolicySpec": {
      "properties": {
        "major": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What constitutes a major version bump",
          "title": "Major"
        },
        "minor": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What constitutes a minor version bump",
          "title": "Minor"
        },
        "patch": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "What constitutes a patch version bump",
          "title": "Patch"
        }
      },
      "title": "SemVerPolicySpec",
      "type": "object"
    },
    "Stability": {
      "description": "API stability level indicating maturity and change likelihood.\n\n- stable: Production-ready, backward-compatible changes only\n- beta: Feature-complete but may have minor changes\n- alpha: Early development, API may change significantly\n- experimental: Highly unstable, may be removed\n- deprecated: Scheduled for removal, use replacement",
      "enum": [
        "stable",
        "beta",
        "alpha",
        "experimental",
        "deprecated"
      ],
      "title": "Stability",
      "type": "string"
    },
    "VersioningLibraryFields": {
      "properties": {
        "api_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "API version (may differ from package version)",
          "title": "Api Version"
        },
        "breaking_changes": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/BreakingChangeSpec"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Breaking changes by version",
          "title": "Breaking Changes"
        },
        "changelog_url": {
          "anyOf": [
            {
              "format": "uri",
              "maxLength": 2083,
              "minLength": 1,
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "URL to changelog",
          "title": "Changelog Url"
        },
        "compatibility": {
          "anyOf": [
            {
              "$ref": "#/$defs/CompatibilitySpec"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "deprecations": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/DeprecationSpec"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Deprecated APIs",
          "title": "Deprecations"
        },
        "stability": {
          "anyOf": [
            {
              "$ref": "#/$defs/Stability"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "API stability level"
        }
      },
      "title": "VersioningLibraryFields",
      "type": "object"
    },
    "VersioningMethodFields": {
      "properties": {
        "deprecated_since": {
          "anyOf": [
            {
              "minLength": 1,
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Version when this method was deprecated",
          "title": "Deprecated Since"
        },
        "removed_in": {
          "anyOf": [
            {
              "minLength": 1,
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Version when this method will be/was removed",
          "title": "Removed In"
        },
        "since": {
          "anyOf": [
            {
              "minLength": 1,
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Version when this method was introduced",
          "title": "Since"
        },
        "stability": {
          "anyOf": [
            {
              "$ref": "#/$defs/Stability"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "title": "VersioningMethodFields",
      "type": "object"
    },
    "VersioningTypeFields": {
      "properties": {
        "deprecated_since": {
          "anyOf": [
            {
              "minLength": 1,
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Version when this type was deprecated",
          "title": "Deprecated Since"
        },
        "removed_in": {
          "anyOf": [
            {
              "minLength": 1,
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Version when this type will be/was removed",
          "title": "Removed In"
        },
        "since": {
          "anyOf": [
            {
              "minLength": 1,
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Version when this type was introduced",
          "title": "Since"
        },
        "stability": {
          "anyOf": [
            {
              "$ref": "#/$defs/Stability"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "title": "VersioningTypeFields",
      "type": "object"
    }
  },
  "$id": "https://libspec.dev/schema/1.0/extensions/versioning.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Extension for API versioning and deprecation specifications.",
  "title": "Versioning Extension"
}
